(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3279:function(e,t,a){Promise.resolve().then(a.bind(a,9042))},9042:function(e,t,a){"use strict";let r;a.r(t),a.d(t,{default:function(){return d}});var n=a(3827),o=a(4090),c={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s=new Uint8Array(16),l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));var i=function(e,t,a){if(c.randomUUID&&!t&&!e)return c.randomUUID();let n=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=n[e];return t}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}(n)};class m{async getDb(){return this.db?this.db:new Promise((e,t)=>{let a=indexedDB.open(this.dbName,this.version);a.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains("images")){let e=t.createObjectStore("images",{keyPath:"id"});e.createIndex("name","name",{unique:!1}),e.createIndex("category","category",{unique:!1})}},a.onerror=e=>{console.error("Error opening database:",e.target.error),t(e.target.error)},a.onsuccess=t=>{this.db=t.target.result,e(this.db)}})}generateUUID(){return i()}async fetchItemCount(e){let t=await this.getDb();return new Promise((a,r)=>{let n=t.transaction(["images"],"readonly").objectStore("images").index("category").count(e);n.onsuccess=()=>a(n.result),n.onerror=e=>r(e.target.error)})}async saveImage(e,t,a){let r=await this.getDb();return new Promise((n,o)=>{let c=r.transaction(["images"],"readwrite").objectStore("images"),s=this.generateUUID(),l=c.put({id:s,name:t,category:a,data:e});l.onsuccess=()=>n(s),l.onerror=e=>o(e.target.error)})}async removeImage(e){let t=await this.getDb();return new Promise((a,r)=>{let n=t.transaction(["images"],"readwrite").objectStore("images").delete(e);n.onsuccess=()=>a(!0),n.onerror=e=>r(e.target.error)})}async fetchImageById(e){let t=await this.getDb();return new Promise((a,r)=>{let n=t.transaction(["images"],"readonly").objectStore("images").get(e);n.onsuccess=()=>{n.result?a(n.result):r(Error("Image not found"))},n.onerror=e=>r(e.target.error)})}async fetchImageUUIDsByCategory(e){let t=await this.getDb();return new Promise((a,r)=>{let n=t.transaction(["images"],"readonly").objectStore("images").index("category").getAllKeys(e);n.onsuccess=()=>{a(n.result)},n.onerror=e=>r(e.target.error)})}async fetchImagesByCategory(e){let t=await this.getDb();return new Promise((a,r)=>{let n=t.transaction(["images"],"readonly").objectStore("images").index("category").getAll(e);n.onsuccess=()=>a(n.result),n.onerror=e=>r(e.target.error)})}constructor(e,t){this.dbName=e,this.version=t,this.db=null}}function d(){var e;let[t,a]=(0,o.useState)([{id:"placeholder_0",type:"placeholder"}]),[r,c]=(0,o.useState)(!1),[s,l]=(0,o.useState)(!1),[i,d]=(0,o.useState)(!1),[g,p]=(0,o.useState)(""),[u,h]=(0,o.useState)("Start ->"),[f,y]=(0,o.useState)(""),[x,b]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{let e=new m("imageDB",5);await e.getDb(),console.log("db helper ",e),b(e)})()},[]),(0,o.useEffect)(()=>{let e=window.location.protocol,t=window.location.hostname,a=window.location.port;y("".concat(e,"//").concat(t).concat(a?":".concat(a):""))},[]);let j=e=>{let t="start.".concat(e),a="".concat(f,"/framer");return'\n        <!DOCTYPE html>\n         <html lang="en">\n         <head>\n           <meta charset="UTF-8">\n           <meta name="viewport" content="width=device-width, initial-scale=1.0">\n           <meta property="og:image" content="'.concat(a,"/images/").concat(t,'" />\n           <meta property="fc:frame:image" content="').concat(a,"/images/").concat(t,'" />\n           <meta property="fc:frame" content="vNext" />\n           <meta property="fc:frame:button:1" content="').concat(u,'" />\n           <meta property="fc:frame:post_url" content="').concat(a,'/start.html" />\n           <title>Image Gallery</title>\n         </head>\n         <body>\n\n             <h1>Image Gallery</h1>\n             <img src="').concat(a,"/images/").concat(t,'" alt="start"/>\n             <div>\n               This self-hosted image gallery for Farcaster frames is <a href="https://vaporware.network">vaporware</a>.\n             </div>\n         </body>\n         </html>\n    ')},w=async e=>{let t=e.target.files[0],a=S(t.name),r="start.".concat(a);console.log("Uploading Start Image",t.name,"As ",r),await N(t,"/framer/images",r),console.log("Uploaded Start Image",r);let n=j(a),o=new Blob([n],{type:"text/html"}),c="start.html";console.log("Uploading HTML",c),await N(o,"/framer",c)},v=e=>async(t,r)=>{let n=Array.from(t.target.files);n.length>0&&(await Promise.all(n.map(async t=>{if(t&&t instanceof Blob)try{let r=await x.saveImage(t,t.name,e),n=URL.createObjectURL(t);a(a=>{let o={id:r,name:t.name,previewUrl:n,type:"upload",category:e},c=a.findIndex(e=>"placeholder"===e.type),s=-1!==c?[...a.slice(0,c),o,...a.slice(c)]:[...a,o];return"placeholder"!==s[s.length-1].type&&s.push({id:"placeholder_".concat(Date.now()),type:"placeholder"}),s})}catch(e){console.error("Failed to save ".concat(t.name," to IndexedDB:"),e)}})),t.target.value="")},I=async(e,t,r)=>{try{await x.removeImage(e,t),console.log("Successfully removed image with ID ".concat(e," from IndexedDB.")),a(e=>e.filter((e,t)=>t!==r))}catch(t){console.error("Failed to remove image with ID ".concat(e," from IndexedDB:"),t)}};async function N(e,t,a){let r=await e.arrayBuffer();try{let n=await fetch("".concat(f).concat(t,"/").concat(a),{method:"PUT",headers:{"Content-Type":e.type,authorization:g},body:r});n.ok?console.log("Upload successful for ".concat(a)):console.error("Error uploading ".concat(a,": "),n.statusText)}catch(e){console.error("Error uploading ".concat(a,": "),e)}}async function U(){c(!1),l(!0),console.log("generateAndUploadAll starting..."),await D(),c(!0),l(!1),console.log("generateAndUploadAll done!")}let D=async()=>{await k("gallery")},k=async e=>{let a=t.filter(e=>"upload"===e.type);for(let e=0;e<a.length;e++){let t=a[e];try{let a=await x.fetchImageById(t.id),r=S(a.name),n="".concat(f,"/framer/images/").concat(e,".").concat(r),o=function(e,t){let a="".concat(f,"/framer"),r='\n    <meta property="fc:frame:button:1" content="<-" />\n    <meta property="fc:frame:post_url" content="'.concat(a,"/change/").concat(e,'" />\n    '),n='\n    <meta property="fc:frame:button:2" content="Permalink" />\n    <meta property="fc:frame:button:2:action" content="link" />\n    <meta property="fc:frame:button:2:target" content="'.concat(t,'" />\n    '),o='\n    <meta property="fc:frame:button:3" content="->" />\n    <meta property="fc:frame:post_url" content="'.concat(a,"/change/").concat(e,'" />\n    ');return'\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <title>Image Gallery</title>\n        <meta property="fc:frame" content="vNext" />\n        <meta property="fc:frame:image" content="'.concat(t,'" />\n        <meta property="og:image" content="').concat(t,'" />\n        ').concat(r,"\n        ").concat(n,"\n        ").concat(o,'\n        <meta property="fc:frame:image:aspect_ratio" content="1:1" />\n      </head>\n      <body>\n        <img src="').concat(t,'" alt="Gallery Image" style="aspect-ratio: 1 / 1; width: 100%;" />\n        <!-- Additional content can go here -->\n      </body>\n      </html>\n    ')}("".concat(e,".").concat(r),n),c=new Blob([o],{type:"text/html"}),s="".concat(e,".html");console.log("Uploading HTML",s),await N(c,"/framer",s),console.log("Uploaded HTML",s);let l="".concat(e,".").concat(r);console.log("Uploading Image",l),await N(a.data,"/framer/images",l),console.log("Uploaded Image",l)}catch(e){console.error("Failed to upload image:",e)}}};function S(e){let t=e.lastIndexOf(".");return -1!==t&&0!==t?e.substring(t+1):""}return(0,n.jsxs)("div",{className:"container max-w-4xl mx-auto px-4",children:[(0,n.jsxs)("header",{className:"my-12",children:[(0,n.jsx)("p",{children:(0,n.jsx)("span",{className:"font-bold",children:"How to use this:"})}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:["Upload images below. Make sure they conform to the Farcaster Frame requirements.",(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"PNG, JPG, or GIF"}),(0,n.jsx)("li",{children:"1.91 to 1 aspect ratio"}),(0,n.jsx)("li",{children:"10 MB or less per image"})]})]}),(0,n.jsx)("li",{children:"If you select an incorrect image, refresh the page and start over."}),(0,n.jsx)("li",{children:"Enter the password we provided."}),(0,n.jsx)("li",{children:'Click "Create Frame Link"'}),(0,n.jsx)("li",{children:"Images are first stored locally in your browser, so make sure you upload all 5 before creating the Frame link."})]})]}),(0,n.jsxs)("main",{children:[(0,n.jsxs)("section",{className:"my-12",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Upload the default Frame image."}),(0,n.jsxs)("div",{className:"flex flex-col justify-between items-center md:items-start justify-between",children:[(0,n.jsxs)("label",{className:"mr-2",children:["Start button text:",(0,n.jsx)("input",{type:"text",className:"ml-2 mb-4 border-b-2",placeholder:"Label for start button",value:u,onChange:e=>h(e.target.value)})]}),(0,n.jsx)("span",{className:"mb-4",children:"Fill out the label first, because as soon as you choose an image here it uploads it and creates the button"}),(0,n.jsx)("input",{type:"file",accept:".jpg, .jpeg, .gif, .png",id:"start-image-upload",onChange:w})]})]}),(0,n.jsxs)("section",{className:"my-12",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Choose images"}),(0,n.jsx)("div",{className:"flex flex-col-reverse md:flex-row md:flex-wrap space-y-4 justify-start items-center md:items-start",children:(e="gallery",t.map((t,a)=>"upload"===t.type?(0,n.jsxs)("div",{className:"image-container",children:[(0,n.jsx)("img",{src:t.previewUrl,alt:"Preview ".concat(t.name),className:"upload-image-preview"}),(0,n.jsx)("button",{className:"remove-btn",onClick:()=>I(t.id,e,a),children:"Remove"})]},t.id):(0,n.jsxs)("div",{className:"flex flex-col upload-placeholder",children:[(0,n.jsxs)("label",{htmlFor:"image-upload-".concat(t.id),children:[i?(0,n.jsx)("span",{className:"underline cursor-pointer",children:"+ Add Folder"}):(0,n.jsx)("span",{className:"underline cursor-pointer",children:"+ Add Images"}),i?(0,n.jsx)("input",{type:"file",accept:".jpg, .jpeg, .gif, .png",id:"image-upload-".concat(t.id),style:{display:"none"},onChange:t=>v(e)(t,a),multiple:!0,webkitdirectory:"",directory:""}):(0,n.jsx)("input",{type:"file",accept:".jpg, .jpeg, .gif, .png",id:"image-upload-".concat(t.id),style:{display:"none"},onChange:t=>v(e)(t,a),multiple:!0})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{className:"mt-8",type:"checkbox",checked:i,onChange:e=>d(e.target.checked)}),"Folder select?"]})]},t.id)))})]})]}),(0,n.jsxs)("footer",{className:"mt-24 mb-12 px-4",children:[(0,n.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between items-center md:items-start",children:r?(0,n.jsxs)("div",{className:"shrink flex text-sm max-w-xl flex-col",children:[(0,n.jsx)("div",{className:"mt-8 md:mt-0",children:(0,n.jsx)("span",{className:"break-all",children:"".concat(f,"/framer/start")})}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"mt-4",children:(0,n.jsx)("em",{children:"Copy this link and paste it into a cast to create your Frame."})})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",className:"mb-4 border-b-2",placeholder:"password",value:g,onChange:e=>p(e.target.value)})}),(0,n.jsxs)("div",{className:"grow",children:[(0,n.jsx)("button",{disabled:0==g.length||s,onClick:U,children:"Create frame link"}),s?(0,n.jsx)("div",{className:"my-2",children:"Creating gallery..."}):(0,n.jsx)(n.Fragment,{})]})]})}),(0,n.jsxs)("div",{className:"my-12",children:["If you're returning here after initially creating the frame and you don't see your url, here's a reminder:",(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"break-all",children:"".concat(f,"/framer/start")})]})]})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=3279)}),_N_E=e.O()}]);